<%- include('../partials/header') %>

<div class="container mt-5">
  <h2 class="text-center mb-4 text-danger fw-bold">ğŸ‘¥ Quáº£n lÃ½ ngÆ°á»i dÃ¹ng</h2>

<div class="d-flex justify-content-between align-items-center mb-4">
  <a href="/admin" class="btn btn-outline-danger px-4 py-2 shadow-sm rounded-pill">
    â¬…ï¸ Quay láº¡i trang Admin
  </a>

  <a href="/admin/users/add" class="btn btn-success fw-bold px-3 py-2 rounded-pill shadow-sm">
    â• ThÃªm ngÆ°á»i dÃ¹ng
  </a>
</div>


  <table class="table table-bordered table-hover shadow-sm align-middle">
    <thead class="table-danger text-center">
      <tr>
        <th>ID</th>
        <th>TÃªn Ä‘Äƒng nháº­p</th>
        <th>Há» vÃ  tÃªn</th>
        <th>Email</th>
        <th>SÄT</th>
        <th>Vai trÃ²</th>
        <th>NgÃ y táº¡o</th>
        <th>HÃ nh Ä‘á»™ng</th>
      </tr>
    </thead>
    <tbody>
      <% if (users.length > 0) { %>
        <% users.forEach(user => { %>
          <tr>
            <td class="text-center"><%= user.id %></td>
            <td><%= user.username %></td>
            <td><%= user.fullname %></td>
            <td><%= user.email || '-' %></td>
            <td><%= user.phone || '-' %></td>
            <td class="text-center">
              <% if (user.role === 'admin' || user.role === 'isAdmin') { %>
                <span class="badge bg-danger">Admin</span>
              <% } else { %>
                <span class="badge bg-secondary">User</span>
              <% } %>
            </td>

            <!-- âœ… ThÃªm dÃ²ng nÃ y Ä‘á»ƒ hiá»ƒn thá»‹ ngÃ y táº¡o -->
            <td class="text-center">
              <%= user.created_at ? new Date(user.created_at).toLocaleString('vi-VN') : '-' %>
            </td>

            <!-- âœ… Giá» cá»™t hÃ nh Ä‘á»™ng Ä‘Ãºng vá»‹ trÃ­ -->
            <td class="text-center">
              <a href="/admin/users/edit/<%= user.id %>" class="btn btn-warning btn-sm">âœï¸ Sá»­a</a>
              <form action="/admin/users/delete/<%= user.id %>" method="POST" style="display:inline;">
                <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('XÃ³a ngÆ°á»i dÃ¹ng nÃ y?')">ğŸ—‘ï¸ XÃ³a</button>
              </form>
            </td>
          </tr>
        <% }) %>
      <% } else { %>
        <tr>
          <td colspan="8" class="text-center text-muted">KhÃ´ng cÃ³ ngÆ°á»i dÃ¹ng nÃ o.</td>
        </tr>
      <% } %>
    </tbody>
  </table>
</div>

<%- include('../partials/footer') %>
