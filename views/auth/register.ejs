<div class="register-full">
  <div class="register-box">
    <h2 class="text-center fw-bold text-pink mb-3">ƒêƒÉng k√Ω t√†i kho·∫£n üéå</h2>
 

    <form id="registerForm">
       <div class="form-group">
      <label>T√™n ƒëƒÉng nh·∫≠p</label>
      <input type="text" name="username" class="form-control" required />
    </div>
      <div class="mb-3">
        <label class="form-label">H·ªç v√† T√™n</label>
        <input type="text" class="form-control" name="fullname" placeholder="Nh·∫≠p h·ªç t√™n" required>
      </div>

      <div class="mb-3">
        <label class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
        <input type="text" class="form-control" name="phone" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i" required>
      </div>

      <div class="mb-3">
        <label class="form-label">M·∫≠t kh·∫©u</label>
        <input type="password" class="form-control" name="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u" required>
      </div>

      <div class="mb-3">
        <label class="form-label">Nh·∫≠p l·∫°i m·∫≠t kh·∫©u</label>
        <input type="password" class="form-control" name="confirm" placeholder="X√°c nh·∫≠n m·∫≠t kh·∫©u" required>
      </div>

      <button type="submit" class="btn btn-pink w-100 py-2">ƒêƒÉng k√Ω</button>

      <div class="text-center text-muted mt-3">
        ƒê√£ c√≥ t√†i kho·∫£n?
        <a href="/auth/login" class="text-pink fw-semibold text-decoration-none">ƒêƒÉng nh·∫≠p ngay</a>
      </div>
    </form>
  </div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function () {
  // Reset l·ªói khi ng∆∞·ªùi d√πng g√µ
  $('input').on('input', function () {
    $(this).removeClass('is-invalid');
    $(this).next('.invalid-feedback').remove();
  });

  $('#registerForm').on('submit', function (e) {
    e.preventDefault();

    // X√≥a l·ªói c≈©
    $('input').removeClass('is-invalid');
    $('.invalid-feedback').remove();

    // L·∫•y d·ªØ li·ªáu form (ƒë√£ th√™m confirm)
    const formData = {
      username: $('input[name="username"]').val().trim(),
      fullname: $('input[name="fullname"]').val().trim(),
      phone: $('input[name="phone"]').val().trim(),
      password: $('input[name="password"]').val(),
      confirm: $('input[name="confirm"]').val()
    };

    let hasError = false;

    // Ki·ªÉm tra t·ª´ng tr∆∞·ªùng
    if (!formData.username) {
      $('input[name="username"]').addClass('is-invalid')
        .after('<div class="invalid-feedback">Vui l√≤ng nh·∫≠p t√™n ƒëƒÉng nh·∫≠p</div>');
      hasError = true;
    }

    if (!formData.fullname) {
      $('input[name="fullname"]').addClass('is-invalid')
        .after('<div class="invalid-feedback">Vui l√≤ng nh·∫≠p h·ªç t√™n</div>');
      hasError = true;
    }

    if (!formData.phone) {
      $('input[name="phone"]').addClass('is-invalid')
        .after('<div class="invalid-feedback">Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i</div>');
      hasError = true;
    }

    if (!formData.password) {
      $('input[name="password"]').addClass('is-invalid')
        .after('<div class="invalid-feedback">Vui l√≤ng nh·∫≠p m·∫≠t kh·∫©u</div>');
      hasError = true;
    }

    if (!formData.confirm) {
      $('input[name="confirm"]').addClass('is-invalid')
        .after('<div class="invalid-feedback">Vui l√≤ng x√°c nh·∫≠n m·∫≠t kh·∫©u</div>');
      hasError = true;
    }

    if (!hasError && formData.password !== formData.confirm) {
      $('input[name="confirm"]').addClass('is-invalid')
        .after('<div class="invalid-feedback">M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp</div>');
      hasError = true;
    }

    if (hasError) return;

    // G·ª≠i d·ªØ li·ªáu ƒëƒÉng k√Ω (kh√¥ng g·ª≠i confirm)
    $.ajax({
      url: '/auth/register',
      type: 'POST',
      data: {
        username: formData.username,
        fullname: formData.fullname,
        phone: formData.phone,
        password: formData.password
      },
      success: function () {
        alert('ƒêƒÉng k√Ω th√†nh c√¥ng!');
        window.location.href = '/auth/login';
      },
      error: function (xhr) {
        const error = xhr.responseJSON?.error || 'L·ªói ƒëƒÉng k√Ω';
        if (xhr.responseJSON?.details) {
          Object.entries(xhr.responseJSON.details).forEach(([field, message]) => {
            if (message) {
              $(`input[name="${field}"]`).addClass('is-invalid')
                .after(`<div class="invalid-feedback">${message}</div>`);
            }
          });
        } else {
          alert(error);
        }
      }
    });
  });
});
</script>
<style>
    body {
  margin: 0;
  font-family: "Poppins", "Noto Sans JP", sans-serif;
}

/* To√†n trang n·ªÅn h·ªìng */
.register-full {
  display: flex;
  justify-content: center;
  align-items: center;

  height: 100vh;
  width: 100%;
}

/* H·ªôp form ƒëƒÉng k√Ω */
.register-box {
  background: #ffffff;
  border-radius: 25px;
  padding: 30px 50px;
  width: 70%;
  max-width: 400px;
  box-shadow: 0 15px 40px rgba(255, 105, 180, 0.15);
  animation: fadeIn 0.8s ease;
}

/* Hi·ªáu ·ª©ng xu·∫•t hi·ªán */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* M√†u h·ªìng */
.text-pink {
  color: #ff66a3;
}

.btn-pink {
  background: linear-gradient(90deg, #ff8fc7, #ffa4d2);
  color: white;
  border: none;
  border-radius: 12px;
  transition: 0.3s;
}

.btn-pink:hover {
  opacity: 0.9;
  transform: translateY(-2px);
}

/* Input */
.form-label {
  font-weight: 500;
  color: #444;
}

.form-control {
  border: 2px solid #ffe3ec;
  border-radius: 12px;
  padding: 10px 14px;
  font-size: 15px;
  transition: 0.3s;
}

.form-control:focus {
  border-color: #ff8fc7;
  outline: none;
  box-shadow: 0 0 5px rgba(255, 167, 196, 0.4);
}

/* Responsive cho mobile */
@media (max-width: 576px) {
  .register-box {
    padding: 30px 25px;
  }
}
</style>